{
    "type": "WizardScriptElement",
    "config": {
        "script": "        \n        \n        \n        var div = new Element('div',{\"class\":\"polygon-overlay-menu\"});\n          \n            \n            <?php \n                GetPlugin('Maps');\n                $layers=array_filter(MapController::GetAllLayers(), function($l){return $l->getId()>20;});\n                \n            ?>\n            \n            var names=<?php echo json_encode(array_map(function($l){ return $l->getName(); }, $layers)); ?>;\n            var icons=<?php echo json_encode(array_map(function($l){ return $l->getIcon(); }, $layers)); ?>;\n            \n            var iconSelection = new UIIconizedSelectionControl(div, {\n              allowMultipleSelection: true,\n              allowEmptySelection: true,\n              icons: icons\n              \n            });\n            \n            \n            iconSelection.addEvent('loadIcon', function(icon, i, asset) {\n              new UIPopover(asset, {\n                title: names[i].capitalize(),\n                anchor: UIPopover.AnchorTo(['bottom'])\n              });\n            }); \n            \n   \n            iconSelection.addEvent('selectionChanged', function(selection) {\n\n                \/\/hide show layers\n            \n            });\n\n            \n\n            \n            \n            \n            return div;",
        "identifier": "customScriptElement"
    }
}