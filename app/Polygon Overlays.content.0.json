{
    "type": "WizardScriptElement",
    "config": {
        "script": "        \n        \n        \n        var div = new Element('div',{\"class\":\"polygon-overlay-menu\"});\n          \n            \n            <?php \n                GetPlugin('Maps');\n                $layers=array_values(array_filter(MapController::GetAllLayers(), function($l){return $l->getId()>=25;}));\n                \n            ?>\n            \n            var layersMeta=<?php echo json_encode(array_map(function($l){ return $l->getMetadata(); }, $layers)); ?>;\n            var names=<?php echo json_encode(array_map(function($l){ return $l->getId().' - '.$l->getName(); }, $layers)); ?>;\n            var icons=<?php echo json_encode(array_map(function($l){ \n                \n                $icon= $l->getIcon(); \n                $icon='components\/com_geolive\/users_files\/user_files_680\/Uploads\/[G]_jq3_[ImAgE]_1VS_oJg.png';\n                return $icon;\n                \n            }, $layers)); ?>;\n            \n            var iconSelection = new UIIconizedSelectionControl(div, {\n              allowMultipleSelection: true,\n              allowEmptySelection: true,\n              icons: icons\n              \n            });\n            \n            \n            iconSelection.addEvent('loadIcon', function(icon, i, asset) {\n              asset.parentNode.setAttribute('data-label',names[i].capitalize());\n            }); \n            \n   \n            iconSelection.addEvent('selectionChanged', function(selection) {\n\n                \/\/hide show layers\n            \n            });\n\n            \n            \n\nvar OverlayLayer = (function() {\n\n\tif(!window.GeoliveLayer){\n\t\tif(window.console&&console.warn){\n\t\t\tconsole.warn('GeoliveLayer is not defined');\n\t\t}\n\t\treturn null;\n\t}\n\n\treturn new Class({\n\t\tExtends: GeoliveLayer\n\t});\n\n\n\n})()\n\n\nif(!window.overlayLayers){\n    window.overlayLayers=layersMeta.map(function(meta){\n        return new OverlayLayer(application, Object.append(meta,{}));\n    });\n}\n\n\n\n            \n            \n            return div;",
        "identifier": "customScriptElement"
    }
}